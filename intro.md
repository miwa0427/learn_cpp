[TOC]

# 開発環境導入編

本ページでは、C++の開発環境の導入方法について説明します

Linuxなんかだと、取り敢えずgccが入っているので

```shell
$ g++ test.cpp
$ ./a.out
hello world
```

という感じでビルドから実行まで出来てしまいます



しかし、Windows環境では何らかの開発環境の導入が必要になりますが、幾多の導入候補があり、それぞれ異なった種類の**初学者に対するメリット・デメリット**を抱えています。

なので、私の方からは以下の３つの開発環境と導入方法を紹介します

- WebサービスのC++開発環境
- Visual Studio Community
- gnupack

## WebサービスのC++開発環境

最近はWebページ上でソースコード記述からビルド及び実行までが出来るものが用意されています

### 導入手順

いくつかサービスが用意されていたので、最初に見つかったページを紹介します。

[paiza.io](https://paiza.io/ja/projects/new)

いくつかのプログラミング言語に対応しているようなのでC++に設定してお使い下さい

### メリット

- 導入の手間がない

### デメリット

- 現時点では本格的な開発には向かない
- デバッガ等の基礎的な開発補助機能は期待出来ません
  - REPL(Read-eval-print loop…対話型評価環境)とも比べ物になりません



## Visual Studio Community

### 導入方法

1. [Installer](https://visualstudio.microsoft.com/ja/)へ飛び、Visual Studio IDE下の[Windows用インストーラー]をクリック

2. [Community 2017]を選んで、インストーラーをダウンロードする

3. インストールするコンポーネントとしてC++を選ぶ

   設定項目が多過ぎていきなりベストの選択は難しいでしょう。インストーラーがあれば、追加インストールが出来るので、取り敢えず[インストールコンポーネント選択画面]で以下のように設定して、インストールして下さい

   - [ワークロード]で以下の項目にチェック
      - ユニバーサルWindowsプラットフォーム開発
      - C++によるデスクトップ開発
   - [個別のコンポーネント]
      - 気になるものを適当にどうぞ

### メリット

- C++開発環境としてこの上ない程にリッチな環境

  - 強力なデバッガ
  - Intellisenseによる強力な入力補助
  - C++17に対応済み

- インストーラーから複数の開発言語の導入が出来る


### デメリット

- インストールが大変(リッチ過ぎて初学者には厳しい)

  インストールしてしまえば、[vcpkg](https://docs.microsoft.com/ja-jp/cpp/vcpkg)というMS標準のVC++向けパッケージマネージャが用意されています。しかし、boost(C++の次期標準)一つ導入するのにも苦労してしまったので、やはり敷居は高いと感じました。

- 標準プロジェクト設定で付いてくるプリコンパイルドヘッダが初心者には厄介

  - ビルド時間を短縮化する為の仕組みだが、いきなり強制されてしまうのが問題

    - VC++2017では作成後にプロジェクト設定から外す必要があるようです(以前はアプリケーションウィザードから外せたのですが。。。)

  - C++教科書のコードがビルドエラーにされてしまう

    ```cpp
    // 最初の行に#include <pch.h>が必要
    #include <iostream>
    
    int main()
    {
        std::cout << "hello c++ world!!" << std::end;
    }
    ```

## gnupack

Windows環境にUnixライクな環境を構築するcygwinと便利なパッケージを一括導入する事が出来ます

### 導入方法

1. [gnupack](https://ja.osdn.net/projects/gnupack/)のページに行く
2. **gnupack-pretest_devel-yyyy.mm.dd.exe**のファイルをダウンロードする
3. ダウンロードしたファイルをクリックすると、自己解凍ダイアログが表示されるので、導入したいディレクトリ選択して解凍する
4. 解凍後のディレクトリにあるstartup_cygwin.exeを起動する

ここまでの操作でcygwinコンソールが起動します。

あとは、作成したC++のファイルを以下のようにビルドと実行する事が出来ます

```shell
# g++ test.cpp
# ./a.out
hello world
```

### メリット

- Unix勉強を兼ねる事が出来ます
- 何も考えずに導入しても取り敢えず一通りの作業が出来るようになっています
  - cygwinはそれなりに考えてインストールしないと何も出来ない
  - Linuxであっても、ある程度のカスタマイズをしないと使いにくいです

### デメリット

- CUIベースの操作が強要されます
- Linuxの知識が必要になります
- 環境導入の手間をすっ飛ばすので、その辺りの知識が身に付かない
  - Unixが上手に使える人は、この辺りの経験をやたら積んでいるものです

### Emacsを使用する(2018/09/22)

何故かgnupack-pretest_devel-2018.06.10.exeのパッケージでインストールした所、gnupackからEmacsが起動出来ませんでした。使用したい方は[NTEmacs](http://cha.la.coocan.jp/doc/NTEmacs.html)をご利用頂くのが良いと思います。インストール手順もリンク先に準備されてますので、導入には苦労しないと思います(…手抜きでごめんなさいm(__)m) 

### オマケ) cygwinを自身で導入する

記事を書く際にcygwinで環境構築をしてみたので、ついでにそちらの手順も紹介しておきます。

1. [cygwin](https://www.cygwin.com/)のページへ行く

2. "Installing Cygwin"の下にあるダウンロードリンクを自身の環境に合わせてクリック

   (64bit Windowsならsetup-x86_64.exe、32bitならsetup-x86.exe)

3. cygwin環境を構築したいディレクトリに先ほどダウンロードしたインストーラを置く。
   - 半角スペースは色々と面倒な事になるので、以下のようなディレクトリに置くのがおススメインストーラーを起動しdevelパッケージを選択してインストールする

     ```
     ex)cygwin環境ディレクトリ例
      c:/cygwin
      c:/devel/cygwin
     ```

4. インストールは以下の流れで行うのがおススメです

  - 初回起動時は[Choose A Download Source]で一旦[Download Without Installing]で、ローカルにパッケージを置いておく(この時点ではcygwin環境は何も構築されていない)
  - 二回目では、同じ画面から[Install from Local Package]で一回目にダウンロードしたパッケージを選択してインストール
  - [Choose A Download Site]では、取り敢えず.jpドメインのものを選べばOK
  - [Select Package]では**[View] : Category**を選んでから、下の画面をマウスクリックで以下のように変更して下さい。
  - [Devel Default] -> [Devel  **Install**]

5. Unix練習環境として使いたいなら、ついでに他のパッケージを選ぶと良いでしょう。私の場合、取り敢えず以下のものを入れておきました

  - [Editor] - [Emacs]
  - [shells] - [zsh]
  - [Util] - [tmux]



## 練習用プロジェクト

ここまでの手順を経れば、ソースコードをビルドして実行する為の環境は手に入ります。

取り敢えずコードを書き始めるのに便利な練習用ディレクトリを用意しておきましたので、[こちら](./blank_proj.zip)をご利用下さい。展開するとVC++2017用とgcc用の練習用プロジェクトが出来ます

### VC++2017用

practice.slnをクリックすれば、練習用プロジェクトが開きます。上でも述べたプリコンパイルドヘッダは外してあるので、C++のサンプルコードもそのままビルドする事が出来ます。practice.cppのコメント部にもありますが、**実行の際にはCtrl + F5とする**ようにして下さい。

### gcc用

gnupackやcygwinで使用するディレクトリへ、gccディレクトリ以下のファイルを移動して下さい。

- ソースコードの追加
  - srcディレクトリ以下に拡張子をcppとして追加します(ex.hoge.cpp)
- ビルド
  - makefileがあるディレクトリ上でmakeを実行します( ex. # make[Enter] )
- 実行
  - makeを実行したディレクトリで./a.outを実行します( ex. # ./a.out )