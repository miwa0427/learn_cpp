[TOC]

# 取り敢えずC++のコードを見てみる

まずはC++のコードを見てみる事にしましょう

## 最初のコード。そして挫折

**C++らしい入門コード**といえば、以下のようなものでしょうか

```cpp
#include <iostream>

int main( void )
{
    std::cout << "hello world!!" << std::endl;    
}
```

想定読者は**C言語をかじった人**なので、上のコードに含まれるC++っぽい部分に触れてみます

- iostreamヘッダは、C++標準ライブラリiostreamの定義が入っている
- main()関数の返り値を省略する事が出来る(その場合return 0相当になる)
- std::coutは**「std名前空間(namespace)にあるcoutというオブジェクト」**
- <<は、演算子''<<''をオーバーロードしたもの

思った以上にC++っぽい要素が満載でした。 orz...

マトモな解説書では、詳細をボヤカしたり、真面目に説明したりするのでしょうが

「取り敢えずC++言語をそれっぽく読めるようになればいい」

事が当面の目標なので、丸々スルーしてしまう事にします

## C言語に寄せてみる

気を取り直して、C++の入門コードを書いてみます

```cpp
#include <cstdio>

int main( void )
{
    printf( "hello world!!" );    
}
```

ほぼC言語のコードですね。「stdio.hではなくcstdio」となっている点だけが異なります

# C言語からC++になった経緯

C言語によって幾つものUnix系OSが開発され、システムがリッチになるにつけ

- Lispみたいに潤沢なマシンパワーを利用してもいいんじゃない？
- smalltalkって言語で**オブジェクト指向**ってのが流行っているみたい

という時代の流れが生まれました。それを受けてC言語にも取り込もうとしたのが起こりのようです(なので当初は「C with classes」と呼ばれていた)

C++設計者がこの辺りの話を書いてくれているので、興味がある方は是非

「C++の設計と進化」Bjarne Stroustrup

をご覧頂ければと思います。大変面白い書籍です

## はじめてのオブジェクト

という訳で、C++が生まれるきっかけとなった**オブジェクト**を作ってみましょう

```cpp
struct Hoge{
  int a;  
};
Hoge hoge;
```

すいません、わざと構造体で書いてみました。とはいえ、普通だとstruct Hogeの所を

```cpp
class Hoge{
public:
  int a;  
};
Hoge hoge;
```

としているだけなので敢えてこうしてみました。ご存知の方もいらっしゃるかもしれませんが

「構造体とクラスは、デフォルトのアクセシビリティがpublicかprivateの違いしかない」

ので、**C言語から移行される方に新しいキーワードなしでオブジェクトを示す**ならこれもアリかな、と

## クラス？オブジェクト？

C++を象徴するキーワードの「クラス」「オブジェクト」…この定義については、今まであらゆる説明が為されてきましたが、私としては規格上の定義の理解は曖昧で

- クラスは定義
- オブジェクトは型定義を元に作られた変数

という感覚で覚えていますが、今のところ、あまりそれで困った事はありません

```cpp
class Hoge{ // Hogeクラスの定義
public:
    int a;
};
Hoge a; // Hogeクラス型のaという変数を作る
```

